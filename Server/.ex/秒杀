1.指标：
    性能指标：QPS(每秒能处理的最大请求数)
    延迟   ：99%的请求都在x秒内返回 (50ms-200ms合格)


2.正确性指标：
    错误率  ： HTTP 500/502/504 的比例
     0超卖0少卖

验收标准：
并发量：假设库存 10000，模拟 10,0000 人同时抢购。

超卖率：0%（严格一致）。

响应：所有用户在 200ms 内得到反馈（抢到 / 没抢到 / 排队中）。

数据库保护： CPU 负载始终控制在 80% 以下，保证系统不会暴毙。


3.架构： mysql redis MQ


1.如何防止超卖

2.如何防止MQ重复消费
	每个消息都附带一个雪花ID作为唯一ID  ,  消费者维护一个

3.redis热点key的压力如何缓解
	1.在redis的入口做一个令牌桶限流 （channel token）
	2.一致性hash分片
4.redis主从切换会出现的问题：
	1.5-10秒的不可用
	2.从节点数据不够新
		强一致性做法，另外开一个队列存储切换之后的所有请求，然后把旧队列所有请求消费掉，再由数据库构筑redis
		弱一致性做法，事后补救，活动结束后做库存 & 订单对账

5.如何防止超卖和少卖
超卖少卖其实是一个redis和数据库的一致性问题。

